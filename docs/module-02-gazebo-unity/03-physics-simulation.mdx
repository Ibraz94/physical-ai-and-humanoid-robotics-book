---
title: Chapter 3 - Physics Simulation and Material Properties
sidebar_position: 3
slug: /module-02/physics-simulation
---

  

### **Understanding Physics Parameters**

  

Accurate physics is crucial for sim-to-real transfer. Let's configure physics precisely.

  

**World Physics Configuration:**

  

```xml

<physics  type="ode">

<max_step_size>0.001</max_step_size>

<real_time_factor>1.0</real_time_factor>

<real_time_update_rate>1000</real_time_update_rate>

<gravity>0 0 -9.81</gravity>

<ode>

<solver>

<type>quick</type>

<iters>50</iters>

<sor>1.3</sor>

</solver>

<constraints>

<cfm>0.0</cfm>

<erp>0.2</erp>

<contact_max_correcting_vel>100.0</contact_max_correcting_vel>

<contact_surface_layer>0.001</contact_surface_layer>

</constraints>

</ode>

</physics>

```

  

**Key Parameters:**

  

-  **max_step_size:** Time step (0.001 = 1ms). Smaller = more accurate but slower

-  **gravity:** Standard Earth gravity is -9.81 m/s² in Z direction

-  **solver iterations:** More iterations = more accurate (50 is good balance)

-  **cfm (Constraint Force Mixing):** Joint/contact softness (0 = perfectly rigid)

-  **erp (Error Reduction Parameter):** How aggressively to correct violations (0.2 is stable)

  

### **Material Properties and Friction**

  

Friction coefficients determine how objects interact:

  

**Common Friction Values:**

- Rubber on concrete: μ = 0.8-1.0

- Metal on metal (dry): μ = 0.15-0.3

- Metal on metal (lubricated): μ = 0.05-0.1

- Ice: μ = 0.02-0.05

- Rubber tire on dry road: μ = 0.7-0.9

  

**Configure in URDF:**

  

```xml

<gazebo  reference="left_wheel">

<mu1>1.0</mu1>

<mu2>1.0</mu2>

<kp>1000000.0</kp>

<kd>100.0</kd>

<material>Gazebo/Black</material>

</gazebo>

```

  

-  **mu1, mu2:** Friction in two perpendicular directions

-  **kp:** Contact stiffness (higher = harder surfaces)

-  **kd:** Contact damping (higher = less bouncy)

  

### **Testing Different Surfaces**

  

Create surfaces with different friction:

  

```xml

<!-- Ice patch (low friction) -->

<model  name="ice_patch">

<pose>3 0 0.001 0 0 0</pose>

<static>true</static>

<link  name="link">

<collision  name="collision">

<geometry>

<box><size>2 2 0.002</size></box>

</geometry>

<surface>

<friction>

<ode>

<mu>0.05</mu>

<mu2>0.05</mu2>

</ode>

</friction>

</surface>

</collision>

<visual  name="visual">

<geometry>

<box><size>2 2 0.002</size></box>

</geometry>

<material>

<ambient>0.7 0.9 1.0 0.8</ambient>

</material>

</visual>

</link>

</model>

  

<!-- Rubber mat (high friction) -->

<model  name="rubber_mat">

<pose>-3 0 0.001 0 0 0</pose>

<static>true</static>

<link  name="link">

<collision  name="collision">

<geometry>

<box><size>2 2 0.002</size></box>

</geometry>

<surface>

<friction>

<ode>

<mu>1.5</mu>

<mu2>1.5</mu2>

</ode>

</friction>

</surface>

</collision>

<visual  name="visual">

<geometry>

<box><size>2 2 0.002</size></box>

</geometry>

<material>

<ambient>0.2 0.2 0.2 1</ambient>

</material>

</visual>

</link>

</model>

```

  

Drive your robot across these patches and observe traction changes!

  

### **Collision Geometry Best Practices**

  

**Use simple collision shapes:**

- Visual: Can be detailed meshes

- Collision: Should be simple primitives (boxes, cylinders, spheres)

  

```xml

<link  name="complex_object">

<!-- Detailed visual -->

<visual>

<geometry>

<mesh>

<uri>model://object/meshes/detailed.dae</uri>

</mesh>

</geometry>

</visual>

<!-- Simple collision -->

<collision>

<geometry>

<box><size>0.6 0.4 0.2</size></box>

</geometry>

</collision>

</link>

```

  

This gives beautiful visuals with fast physics computation.

  

### **Dynamic vs Static Objects**

  

**Static objects** (walls, floors):

```xml

<model  name="wall">

<static>true</static>

<!-- Much faster simulation -->

</model>

```

  

**Dynamic objects** (movable items):

```xml

<link  name="movable_box">

<inertial>

<mass>5.0</mass>

<inertia  ixx="0.083"  iyy="0.083"  izz="0.083"/>

</inertial>

</link>

```

  

Use static whenever possible—it's much faster!